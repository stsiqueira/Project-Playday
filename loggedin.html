<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
            https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-auth.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        <script
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&libraries=&v=weekly"
        defer
        ></script>
        <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            var firebaseConfig = {
                apiKey: "AIzaSyATN0KrGH8WPsgEiozxcev0W3Fgq3F41i4",
                authDomain: "test-1-5be12.firebaseapp.com",
                projectId: "test-1-5be12",
                storageBucket: "test-1-5be12.appspot.com",
                messagingSenderId: "419371280336",
                appId: "1:419371280336:web:e6a5055469d95d9d777bd5",
                measurementId: "G-DP5FXPH4WE"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();
        </script>

        <script>
            firebase.auth().onAuthStateChanged(function(user) {
                if(user) {
                    var div = document.getElementById('firebaseui-auth-container');
                    div.innerHTML = `<h1> Congrats ${user.displayName} logged in with ${user.email}</h1>`;
                }
                else {
                    console.log("hii");
                }
            });
        </script>

       
    </head>
    <body>
        <h1>Welcome to My Awesome App</h1>
        <div id="firebaseui-auth-container"></div>
        <button id = "find-me">Show my location</button><br/>
        <p id = "status"></p>
        <a id = "map-link" target="_blank"></a>
    </body>

    <script>
        document.getElementById("find-me").addEventListener("click", function() {
            const status = document.querySelector('#status');
            const mapLink = document.querySelector('#map-link');

            mapLink.href = '';
            mapLink.textContent = '';

            function success(position) {
                const latitude  = position.coords.latitude;
                const longitude = position.coords.longitude;

                status.textContent = '';
                mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
                mapLink.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;
            }

            function error() {
                status.textContent = 'Unable to retrieve your location';
                }

                if(!navigator.geolocation) {
                status.textContent = 'Geolocation is not supported by your browser';
                } else {
                status.textContent = 'Locating…';
                navigator.geolocation.getCurrentPosition(success, error);
            }
        });

        // document.querySelector('#find-me').addEventListener('click', geoFindMe);
    </script>
</html>
